(()=>{let e="border-radius: 5px; letter-spacing: 2px; margin-left: 3px; padding: 1px 12px; font-style: inherit; font-weight: bold; cursor: pointer;";const t=e=>{const t=document.createElement("div");return t.classList.add("hiddenDiv"),t.setAttribute("id","hiddenDiv"),t.style.display="none",t.style.padding="2px",t.style.width="100%",t.style.borderRadius="5px",t.style.background=e.avgRating>=4?"#ECFDF5":e.avgRating>=3?"#FFFBEB":"#FEF2F2",t.style.border=e.avgRating>=4?"1px solid #047857":e.avgRating>=3?"1px solid #FBBF24":"1px solid #F87171",t.style.width="250px",t.style.height="150px",t.style.position="absolute",t.style.top="-175px",t.style.left="-90px",t.style.overflow="auto",t.style.zIndex="99999",t.innerHTML=`\n      <div class = "titleBar" style="font-family: 'Poppins', sans-serif; display: flex; justify-content: space-between; width: 100%;">\n          <span><a href = "https://www.ratemyprofessors.com/professor/${e.legacyId}" target = "_blank" ">${e.firstName+" "+e.lastName}</a></span>\n          <span class="closeBtn"><strong>X</strong></span>\n      </div>\n      <hr style="margin-top: 1px; color: black;" />\n      <div style="font-size: .85rem; font-family: 'Poppins', sans-serif; display: flex; flex-direction: column;">\n          <span style = "text-transform: uppercase;"><strong style = "font-size: 1.15rem;" >${e.numRatings}</strong> total ratings</span>\n          <span style = "text-transform: uppercase;"><strong style = "font-size: 1.15rem;" >${e.avgRating}</strong> average rating</span>\n          <span style = "text-transform: uppercase;"><strong style = "font-size: 1.15rem;" >${e.avgDifficulty}</strong> average difficulty</span>\n          <span style = "text-transform: uppercase;"><strong style = "font-size: 1.15rem;" >${e.wouldTakeAgainPercent}%</strong> would take again </span>\n      </div>\n  `,function(e){let t=0,n=0,r=0,o=0;const s=e.querySelector(".titleBar"),a=document.getElementById("main_iframe"),i=a.contentDocument||a.contentWindow.document;function l(s){s.preventDefault(),console.log("dragging and all that"),t=r-s.clientX,n=o-s.clientY,r=s.clientX,o=s.clientY,e.style.top=e.offsetTop-n+"px",e.style.left=e.offsetLeft-t+"px"}function c(){i.removeEventListener("mouseup",c),i.removeEventListener("mousemove",l)}s.addEventListener("mousedown",(e=>function(e,t){e.preventDefault(),r=e.clientX,o=e.clientY,t.addEventListener("mouseup",c),t.addEventListener("mousemove",l)}(e,i)))}(t),t},n=async()=>{const n=document.getElementById("main_iframe");if(n){let r=n.contentDocument||n.contentWindow.document,o=r.getElementsByClassName("MuiLink-underlineHover"),s=r.querySelectorAll("a.MuiTypography-root.MuiLink-root.MuiLink-underlineHover.d-inline.MuiTypography-body1.MuiTypography-colorPrimary");if(o.length>0){let n=Array.from(o),r=[];n.forEach((e=>{r.push({profName:e.textContent})})),s.forEach((async(n,o)=>{let s=n.parentNode.parentNode.parentNode;const a=await(async e=>{const t=await(async e=>new Promise(((t,n)=>{try{chrome.runtime.sendMessage({action:"teacherInfo",profName:e},(e=>{chrome.runtime.lastError?(console.error(chrome.runtime.lastError),n(chrome.runtime.lastError)):t(e)}))}catch(e){console.error("Error:",e),n(e)}})))(e);return t.teacher.length>0?(await(async e=>new Promise(((t,n)=>{try{chrome.runtime.sendMessage({action:"teacherRating",profID:e},(e=>{chrome.runtime.lastError?(console.error(chrome.runtime.lastError),n(chrome.runtime.lastError)):t(e)}))}catch(e){console.error("Error:",e),n(e)}})))(t.teacher[0].id)).rating:null})(r[o].profName);if(null!=a&&-1!=a.wouldTakeAgainPercent){let n=a.avgRating>=4?e+"background: #ECFDF5; border: 1px solid #047857; color: #047857;":a.avgRating>=3?e+"background: #FFFBEB; border: 1px solid #FBBF24; color: #FBBF24;":e+"background: #FEF2F2; border: 1px solid #F87171; color: #F87171;";const r=(()=>{const e=document.createElement("div");return e.classList.add("container"),e.style.flexDirection="column",e.style.position="relative",e.innerHTML="\n    <style>\n      @import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,200;0,400;0,700;1,400;1,700&display=swap');\n    </style>\n  ",e})(),o=t(a),i=((e,t)=>{const n=document.createElement("button");return n.classList.add("rmpBtn"),n.style=t,n.innerText=e.avgRating,n})(a,n);r.appendChild(o),r.appendChild(i),s.appendChild(r),((e,t)=>{e.addEventListener("click",(()=>{t.style.display="block"})),t.querySelector(".closeBtn").addEventListener("click",(()=>{t.style.display="none"}))})(i,o)}}))}}else console.log('Iframe with ID "main_iframe" not found.')};chrome.runtime.onMessage.addListener((async(e,t,r)=>{"startSearchInContentScript"===e.action&&await n()}))})();